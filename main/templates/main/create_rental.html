{% extends 'main/base.html' %}

{% block title %}Yangi Ijara - ToolRent CRM{% endblock %}

{% block content %}
<div class="page-title">
    <h2>Yangi Ijara Yaratish</h2>
    <a href="{% url 'main:rental_list' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Ortga
    </a>
</div>

<div class="card">
    <div class="card-body">
        <form method="post">
            {% csrf_token %}
            <div style="max-width: 500px;">
                <div class="form-group">
                    <label for="id_customer" class="form-label">Mijoz *</label>
                    {{ form.customer }}
                    {% if form.customer.errors %}
                    <div style="color: var(--danger); font-size: 0.875rem; margin-top: 0.25rem;">
                        {{ form.customer.errors }}
                    </div>
                    {% endif %}
                </div>
                
                <div class="form-group">
                    <label for="id_start_date" class="form-label">Boshlanish sanasi *</label>
                    {{ form.start_date }}
                    {% if form.start_date.errors %}
                    <div style="color: var(--danger); font-size: 0.875rem; margin-top: 0.25rem;">
                        {{ form.start_date.errors }}
                    </div>
                    {% endif %}
                    <div style="color: var(--gray); font-size: 0.875rem; margin-top: 0.25rem;">
                        Ijara boshlanish sanasi (odatda bugun)
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="margin-top: 1rem;">
                    <i class="fas fa-arrow-right"></i> Asbob Qo'shish
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// JavaScript bilan bugungi sanani o'rnatish
document.addEventListener('DOMContentLoaded', function() {
    const startDateField = document.getElementById('id_start_date');
    if (startDateField && !startDateField.value) {
        const today = new Date().toISOString().split('T')[0];
        startDateField.value = today;
    }
});
</script>
{% endblock %}